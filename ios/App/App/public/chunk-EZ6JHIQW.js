import{a as j,b as T,c as z,d as W,e as A,f as D,g as B,k as q,l as G,m as L,n as J}from"./chunk-TAZRYRIE.js";import{$a as t,Ba as c,Ga as y,Ib as I,Jb as V,Ka as F,Lb as N,Oa as h,V as E,_a as x,a as _,ab as o,b as w,cb as S,da as p,db as g,ea as m,eb as d,hb as k,jb as i,k as M,kb as u,lb as O,nb as b,ob as P,pb as v}from"./chunk-Z25VUDG2.js";var f=class{id;nombre="";edad="";altura="";peso="";constructor(n){n&&Object.assign(this,n)}};var C=class s{personas=[];personasSubject=new M([]);personas$=this.personasSubject.asObservable();personaSeleccionadaSubject=new M(null);personaSeleccionada$=this.personaSeleccionadaSubject.asObservable();constructor(){this.cargarPersonas()}cargarPersonas(){let n=localStorage.getItem("personas_familia");n&&(this.personas=JSON.parse(n),this.personasSubject.next([...this.personas]))}guardarPersonas(){localStorage.setItem("personas_familia",JSON.stringify(this.personas)),this.personasSubject.next([...this.personas])}obtenerPersonas(){return[...this.personas]}a\u00F1adirPersona(n){let e=w(_({},n),{id:Date.now().toString()+Math.random().toString(36).substr(2,9)});this.personas.push(e),this.guardarPersonas()}actualizarPersona(n){let e=this.personas.findIndex(a=>a.id===n.id);e!==-1&&(this.personas[e]=_({},n),this.guardarPersonas())}eliminarPersona(n){this.personas=this.personas.filter(a=>a.id!==n),this.guardarPersonas();let e=this.personaSeleccionadaSubject.value;e&&e.id===n&&this.personaSeleccionadaSubject.next(null)}seleccionarPersona(n){this.personaSeleccionadaSubject.next(n)}obtenerPersonaSeleccionada(){return this.personaSeleccionadaSubject.value}deseleccionarPersona(){this.personaSeleccionadaSubject.next(null)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=E({token:s,factory:s.\u0275fac,providedIn:"root"})};function U(s,n){if(s&1){let e=S();t(0,"div",9),g("click",function(){let r=p(e).$implicit,l=d(2);return m(l.seleccionarPersona(r))}),t(1,"div",10)(2,"strong"),i(3),o(),t(4,"span"),i(5),o()(),t(6,"button",11),g("click",function(r){let l=p(e).$implicit,R=d(2);return m(R.eliminarPersona(r,l.id))}),i(7," \xD7 "),o()()}if(s&2){let e=n.$implicit,a=d(2);k("selected",(a.personaSeleccionada==null?null:a.personaSeleccionada.id)===e.id),c(3),u(e.nombre||"Sin nombre"),c(2),u(e.edad?e.edad+" a\xF1os":"")}}function X(s,n){if(s&1&&(t(0,"div",7),h(1,U,8,4,"div",8),o()),s&2){let e=d();c(),x("ngForOf",e.personas)}}function Y(s,n){if(s&1){let e=S();t(0,"div",12)(1,"h3"),i(2),o(),t(3,"form",13),g("ngSubmit",function(){p(e);let r=d();return m(r.guardarPersona())}),t(4,"div",14)(5,"label",15),i(6,"Nombre:"),o(),t(7,"input",16),v("ngModelChange",function(r){p(e);let l=d();return P(l.personaForm.nombre,r)||(l.personaForm.nombre=r),m(r)}),o()(),t(8,"div",14)(9,"label",17),i(10,"Edad:"),o(),t(11,"input",18),v("ngModelChange",function(r){p(e);let l=d();return P(l.personaForm.edad,r)||(l.personaForm.edad=r),m(r)}),o()(),t(12,"div",14)(13,"label",19),i(14,"Altura (cm):"),o(),t(15,"input",20),v("ngModelChange",function(r){p(e);let l=d();return P(l.personaForm.altura,r)||(l.personaForm.altura=r),m(r)}),o()(),t(16,"div",14)(17,"label",21),i(18,"Peso (kg):"),o(),t(19,"input",22),v("ngModelChange",function(r){p(e);let l=d();return P(l.personaForm.peso,r)||(l.personaForm.peso=r),m(r)}),o()(),t(20,"div",23)(21,"button",24),i(22),o(),t(23,"button",25),g("click",function(){p(e);let r=d();return m(r.cancelar())}),i(24," Cancelar "),o()()()()}if(s&2){let e=d();c(2),u(e.modoEdicion?"Editar Persona":"Nueva Persona"),c(5),b("ngModel",e.personaForm.nombre),c(4),b("ngModel",e.personaForm.edad),c(4),b("ngModel",e.personaForm.altura),c(4),b("ngModel",e.personaForm.peso),c(3),O(" ",e.modoEdicion?"Actualizar":"Guardar"," ")}}function Z(s,n){if(s&1){let e=S();t(0,"div",26)(1,"h3"),i(2),o(),t(3,"div",27)(4,"div",28)(5,"strong"),i(6,"Nombre:"),o(),t(7,"span"),i(8),o()(),t(9,"div",28)(10,"strong"),i(11,"Edad:"),o(),t(12,"span"),i(13),o()(),t(14,"div",28)(15,"strong"),i(16,"Altura:"),o(),t(17,"span"),i(18),o()(),t(19,"div",28)(20,"strong"),i(21,"Peso:"),o(),t(22,"span"),i(23),o()()(),t(24,"button",29),g("click",function(){p(e);let r=d();return m(r.editarPersona())}),i(25," Editar Datos "),o()()}if(s&2){let e=d();c(2),O("Informaci\xF3n de ",e.personaSeleccionada.nombre),c(6),u(e.personaSeleccionada.nombre||"No especificado"),c(5),u(e.personaSeleccionada.edad?e.personaSeleccionada.edad+" a\xF1os":"No especificado"),c(5),u(e.personaSeleccionada.altura?e.personaSeleccionada.altura+" cm":"No especificado"),c(5),u(e.personaSeleccionada.peso?e.personaSeleccionada.peso+" kg":"No especificado")}}function $(s,n){s&1&&(t(0,"div",30)(1,"p"),i(2,"No hay personas registradas en la familia."),o(),t(3,"p"),i(4,'Haz clic en "Nueva Persona" para a\xF1adir la primera.'),o()())}var H=class s{constructor(n){this.personaService=n}personas=[];personaSeleccionada=null;mostrarFormulario=!1;modoEdicion=!1;personaForm=new f;ngOnInit(){this.personaService.personas$.subscribe(n=>{this.personas=n}),this.personaService.personaSeleccionada$.subscribe(n=>{this.personaSeleccionada=n})}seleccionarPersona(n){this.personaService.seleccionarPersona(n),this.mostrarFormulario=!1}nuevaPersona(){this.personaForm=new f,this.modoEdicion=!1,this.mostrarFormulario=!0,this.personaService.deseleccionarPersona()}editarPersona(){this.personaSeleccionada&&(this.personaForm=_({},this.personaSeleccionada),this.modoEdicion=!0,this.mostrarFormulario=!0)}guardarPersona(){if(!this.personaForm.nombre.trim()){alert("El nombre es obligatorio");return}this.modoEdicion&&this.personaForm.id?(this.personaService.actualizarPersona(this.personaForm),this.personaService.seleccionarPersona(this.personaForm)):this.personaService.a\u00F1adirPersona(this.personaForm),this.mostrarFormulario=!1,this.personaForm=new f}eliminarPersona(n,e){n.stopPropagation(),confirm("\xBFEst\xE1s seguro de que quieres eliminar esta persona?")&&this.personaService.eliminarPersona(e)}cancelar(){this.mostrarFormulario=!1,this.personaForm=new f,this.modoEdicion=!1}static \u0275fac=function(e){return new(e||s)(y(C))};static \u0275cmp=F({type:s,selectors:[["app-perfil"]],decls:12,vars:4,consts:[[1,"perfil-container"],[1,"selector-personas"],["class","personas-lista",4,"ngIf"],[1,"btn-nueva-persona",3,"click"],["class","formulario-persona",4,"ngIf"],["class","info-persona",4,"ngIf"],["class","mensaje-vacio",4,"ngIf"],[1,"personas-lista"],["class","persona-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"persona-card",3,"click"],[1,"persona-info"],["title","Eliminar persona",1,"btn-eliminar",3,"click"],[1,"formulario-persona"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","placeholder","Nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","edad"],["type","number","id","edad","placeholder","Edad","name","edad","min","0","max","120",3,"ngModelChange","ngModel"],["for","altura"],["type","number","id","altura","placeholder","Altura","name","altura","min","50","max","250","step","0.1",3,"ngModelChange","ngModel"],["for","peso"],["type","number","id","peso","placeholder","Peso","name","peso","min","1","max","500","step","0.1",3,"ngModelChange","ngModel"],[1,"form-buttons"],["type","submit",1,"btn-guardar"],["type","button",1,"btn-cancelar",3,"click"],[1,"info-persona"],[1,"datos-persona"],[1,"dato"],[1,"btn-editar",3,"click"],[1,"mensaje-vacio"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h2"),i(2,"Gesti\xF3n de Perfiles Familiares"),o(),t(3,"div",1)(4,"h3"),i(5,"Seleccionar Persona"),o(),h(6,X,2,1,"div",2),t(7,"button",3),g("click",function(){return a.nuevaPersona()}),i(8," + Nueva Persona "),o()(),h(9,Y,25,6,"div",4)(10,Z,26,5,"div",5)(11,$,5,0,"div",6),o()),e&2&&(c(6),x("ngIf",a.personas.length>0),c(3),x("ngIf",a.mostrarFormulario),c(),x("ngIf",a.personaSeleccionada&&!a.mostrarFormulario),c(),x("ngIf",a.personas.length===0))},dependencies:[N,I,V,J,D,j,B,T,z,L,G,q,A,W],styles:[".perfil-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:30px}h3[_ngcontent-%COMP%]{color:#4caf50;margin-bottom:20px;border-bottom:2px solid #4CAF50;padding-bottom:10px}.selector-personas[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px #0000001a;margin-bottom:25px}.personas-lista[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;margin-bottom:20px}.persona-card[_ngcontent-%COMP%]{background:#f9f9f9;border:2px solid #ddd;border-radius:8px;padding:15px;cursor:pointer;transition:all .3s ease;position:relative;display:flex;justify-content:space-between;align-items:center}.persona-card[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-color:#4caf50}.persona-card.selected[_ngcontent-%COMP%]{background:#e8f5e8;border-color:#4caf50;box-shadow:0 0 10px #4caf504d}.persona-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.persona-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-size:16px}.persona-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:14px}.btn-eliminar[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;border-radius:50%;width:25px;height:25px;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:background-color .3s}.btn-eliminar[_ngcontent-%COMP%]:hover{background:#da190b}.btn-nueva-persona[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;font-size:16px;width:100%;transition:background-color .3s}.btn-nueva-persona[_ngcontent-%COMP%]:hover{background:#45a049}.formulario-persona[_ngcontent-%COMP%], .info-persona[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px #0000001a;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:16px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 5px #4caf504d}.form-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;margin-top:25px}.btn-guardar[_ngcontent-%COMP%], .btn-editar[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;font-size:16px;transition:background-color .3s}.btn-guardar[_ngcontent-%COMP%]:hover, .btn-editar[_ngcontent-%COMP%]:hover{background:#45a049}.btn-cancelar[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;font-size:16px;transition:background-color .3s}.btn-cancelar[_ngcontent-%COMP%]:hover{background:#da190b}.datos-persona[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:25px}.dato[_ngcontent-%COMP%]{background:#f9f9f9;padding:15px;border-radius:8px;border-left:4px solid #4CAF50}.dato[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;margin-bottom:5px}.dato[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:16px}.mensaje-vacio[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:40px;border-radius:10px;box-shadow:0 2px 10px #0000001a;color:#666}.mensaje-vacio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px}@media (max-width: 768px){.perfil-container[_ngcontent-%COMP%]{padding:15px}.personas-lista[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-buttons[_ngcontent-%COMP%]{flex-direction:column}.datos-persona[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{C as a,H as b};
